<?xml version="1.0" encoding="utf-8"?>
<extension type="module" version="3.1.0" client="site" method="upgrade">
    <name>HQ CB List for Community Builder</name>
    <author>Magnus Hasselquist</author>
    <authorUrl>https://github.com/magnushasselquist</authorUrl>
    <version>2.3</version>
    <creationDate>2021-05-07</creationDate>
    <license>GNU General Public License version 2 or later</license>
    <description>Displaying Users from a selected CB List in a Module. This version is for CB 2</description>
    <files>
        <filename>mod_hqcblistmodule.xml</filename>
        <filename module="mod_hqcblistmodule">mod_hqcblistmodule.php</filename>
        <filename>index.html</filename>
        <filename>helper.php</filename>
        <filename>tmpl/default.php</filename>
        <filename>tmpl/index.html</filename>
    </files>
    <config>
    	<fields name="params">
    		<fieldset name="basic">
       			<field
               		name="listid"
               		type="sql"
               		default=""
               		label="SELECT the CB List to be presented in the module"
               		key_field="listid"
               		value_field="title"
               		query="SELECT listid, title FROM #__comprofiler_lists where published=1" />
		<field
			name="user-limit"
			type="integer"
			first="1" last="100" step="1"
			default="10"
			label="Number of users to show"	/>
			<field
               		name="orderby"
               		type="sql"
               		default="list default"
               		label="Order by field"
               		key_field="id"
               		value_field="title"
               		query="SELECT 0 AS sort, 'list_default' AS id, 'List default' AS title UNION SELECT 1 AS sort, name AS id, name AS title FROM #__comprofiler_fields WHERE published=1 ORDER BY sort,title ASC" />
			<field 
					name="sortorder" type="list"
					default="list"
					label="Sort order"
				>
				<option value="list_default">List default</option>
				<option value="asc">Ascending </option>
				<option value="desc">Descending</option>
				<option value="random">Random</option>				
			</field>	
                  <field
                		name="text-above"
                		type="editor"
                		label="Text to be included ABOVE the user list."
 					        buttons="false"
 					        filter="raw" />
		<field 
			name="columns" type="list"
			default="0"
			label="Number of columns"
			>
				<option value="0">Responsive auto-fit</option>
				<option value="1">1</option>
				<option value="2">2</option>
				<option value="3">3</option>
				<option value="4">4</option>
				<option value="5">5</option>
				<option value="6">6</option>
				<option value="7">7</option>
				<option value="8">8</option>
				<option value="9">9</option>
				<option value="10">10</option>							
		</field>
		<field 
		name="Minwidth" 
		type="text" default="5" 
		label="Minimum width column (rem)" 
		description=""/>
               	 <field
               			name="template"
               			type="editor"
               			label="Template for displaying each user. Use [cb_filedname] syntax to include fields."
					        buttons="false"
							default="&lt;p&gt; &lt;img src=&quot;[avatar]&quot; alt=&quot;[name]&quot; width=&quot;50&quot; /&gt;&lt;/p&gt;&lt;p&gt;&lt;a href=&quot;../cb-profile/[user_id]&quot;&gt;[name]&lt;/a&gt;&lt;/p&gt;"
					        filter="raw" />
						
                  <field
                		name="text-below"
                		type="editor"
                		label="Text to be included UNDER the user list"
 					        buttons="false"
 					        filter="raw" />
		  <field 
			 	name="debug" type="radio"
				default="0"
				label="Turn on DEBUG output to help find errors in list filter (make sure to turn off in production)."
				>
					<option value="0">OFF</option>
					<option value="1">ON</option>
				</field>			
    		</fieldset>
		</fields>
    </config>
    <updateservers>
      <server type="extension" priority="2" name="HQ CB List for Community Builder"> https://raw.githubusercontent.com/magnushasselquist/hqcblistmodule/master/updates.xml</server>
    </updateservers>
</extension>
